# Enable WebDAV for the specified directory
Alias /webdav "/data"

<Directory "/data">
    # Enable WebDAV
    Dav On

    # Allow Read and Write access to the WebDAV directory
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted

    # Set WebDAV file locking methods
    DavDepthInfinity On
    DavMinTimeout 600

    # Digest Authentication (for user access control)
    AuthType Digest
    AuthName "WebDAV Restricted Area"
    AuthDigestDomain /webdav
    AuthUserFile "/config/htpasswd/.htpasswd"
    AuthGroupFile /dev/null
    Require valid-user

    # Log WebDAV access
    CustomLog logs/dav_access.log combined
</Directory>
